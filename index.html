<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Гид по визам для цифровых кочевников в Европе (2025)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Calm Harmony (Warm neutrals like bg-amber-50, with olive green for land and teal-600 as accents) -->
    <!-- Application Structure Plan: Single-page dashboard. The map is replaced by an interactive Carousel, where each slide presents key summary data (Population, Economy, Climate, English Proficiency) in a concise card format. This structure prioritizes comparison and discovery via linear iteration. Clicking a navigation button or the "Details" button in the carousel triggers the `updateDetails(countryId)` function to synchronize with the detailed, tabbed information panel below. The layout is now fully responsive, using reduced padding and smaller text sizes on mobile (sm:) breakpoints. -->
    <!-- Visualization & Content Choices: 1. Country Summary Data -> Goal: Inform/Compare/Organize -> Viz: Interactive Card Carousel (HTML/CSS/JS) -> Interaction: Next/Prev buttons, direct click on card, sync with detail view -> Justification: Offers a structured, digestible, and engaging method for reviewing high-level qualitative and quantitative criteria. 2. All Country-Specific Data (CoL, Rent, Safety, etc.) -> Goal: Inform/Organize -> Presentation: Dynamic HTML card with Tabs (Finances, Logistics, Lifestyle) -> Interaction: Tabs switch structured content via JS -> Justification: Effectively manages the high volume of detailed, structured data points. All choices confirmed to use HTML/CSS/JS, with NO SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFFAF0; 
        }

        /* --- Carousel Styling --- */
        .carousel-container {
            overflow: hidden;
            width: 100%;
            border-radius: 1rem;
            position: relative;
        }

        .carousel-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .carousel-slide {
            flex: 0 0 100%; /* Каждый слайд занимает 100% ширины контейнера */
            padding: 0.5rem; /* Уменьшаем padding на мобильных */
            box-sizing: border-box;
        }

        .slide-card {
            background-color: white;
            border: 1px solid #E0F2F1;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 1.5rem; /* Меньше padding на мобильных */
        }
        
        @media (min-width: 768px) {
             .carousel-slide {
                padding: 1rem; /* Стандартный padding на десктопе */
            }
             .slide-card {
                padding: 2rem;
            }
        }
        
        .slide-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 20px -3px rgba(0, 0, 0, 0.15);
        }

        .carousel-nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 20;
            background-color: rgba(255, 255, 255, 0.7);
            border: none;
            padding: 0.5rem; /* Меньше padding на кнопках на мобильных */
            border-radius: 9999px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s;
        }
        
        @media (min-width: 768px) {
            .carousel-nav-button {
                padding: 0.75rem;
            }
        }

        .carousel-nav-button:hover {
            background-color: rgba(255, 255, 255, 0.9);
        }

        #prev-button { left: 0.5rem; }
        #next-button { right: 0.5rem; }

        /* --- General Styling --- */
        .active-button {
            background-color: #14B8A6 !important;
            color: white !important;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .tab-active {
            border-bottom: 3px solid #0D9488;
            color: #0D9488;
            font-weight: 600;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-12">

        <header class="text-center mb-6 md:mb-10">
            <h1 class="text-3xl md:text-5xl font-bold text-teal-800 mb-1">Гид по визам для цифровых кочевников в Европе</h1>
            <p class="text-base md:text-xl text-gray-600 mt-2">Полное сравнение требований, стоимости жизни и логистики в 2025 году</p>
        </header>

        <main>
            <section id="comparison-tool" class="bg-white rounded-2xl shadow-lg p-4 md:p-8 mb-8 md:mb-16">
                <div class="text-center mb-6">
                    <h2 class="text-xl md:text-3xl font-bold text-teal-700 mb-2">Обзор стран: Факторы жизни и работы</h2>
                    <p class="text-sm md:text-base text-gray-600 max-w-3xl mx-auto">
                        Используйте карусель, чтобы быстро сравнить основные показатели стран, включая население, экономику и климат.
                    </p>
                </div>
                
                <!-- Карусель стран -->
                <div class="carousel-container mb-6 max-w-4xl mx-auto">
                    <div id="carousel-track" class="carousel-track h-[300px] md:h-[350px]">
                        <!-- Слайды будут сгенерированы JavaScript -->
                    </div>
                    <button id="prev-button" class="carousel-nav-button text-gray-700 hover:text-teal-600">
                        <span class="text-xl">❮</span>
                    </button>
                    <button id="next-button" class="carousel-nav-button text-gray-700 hover:text-teal-600">
                        <span class="text-xl">❯</span>
                    </button>
                </div>
                <!-- Конец карусели -->

                <div id="country-filters" class="flex flex-wrap justify-center gap-2 md:gap-3 mb-4">
                    <!-- Кнопки-фильтры будут сгенерированы JavaScript -->
                </div>
            </section>

            <section id="details-view" class="min-h-[600px] transition-opacity duration-500">
                <div id="details-content" class="bg-white rounded-2xl shadow-xl p-4 md:p-8">
                    <!-- Детали будут загружены сюда -->
                </div>
            </section>
            
            <section id="general-info" class="mt-8 md:mt-16">
                <div class="bg-teal-50 border-l-4 border-teal-500 rounded-r-lg p-4 md:p-8">
                     <h2 class="text-xl md:text-3xl font-bold text-teal-700 mb-4">Общие требования</h2>
                    <p class="text-sm md:text-base text-gray-700 mb-6">
                       Необходимый минимум, который потребуется вам для любой визы цифрового кочевника в Европе.
                    </p>
                    <ul class="space-y-4 text-sm md:text-base">
                        <li class="flex items-start">
                            <span class="text-teal-600 font-bold mr-3">✓</span>
                            <p><strong class="font-semibold">Подтверждение удаленной работы:</strong> Действующий трудовой договор с компанией за пределами страны или документы о регистрации собственного бизнеса.</p>
                        </li>
                        <li class="flex items-start">
                            <span class="text-teal-600 font-bold mr-3">✓</span>
                             <p><strong class="font-semibold">Мед. страховка:</strong> Полис, действительный на весь срок пребывания и покрывающий все риски.</p>
                        </li>
                        <li class="flex items-start">
                            <span class="text-teal-600 font-bold mr-3">✓</span>
                            <p><strong class="font-semibold">Финансовая стабильность:</strong> Доказательство регулярного дохода (банковские выписки за последние 3-6 месяцев), превышающего установленный минимум.</p>
                        </li>
                        <li class="flex items-start">
                           <span class="text-teal-600 font-bold mr-3">✓</span>
                            <p><strong class="font-semibold">Справка о несудимости:</strong> Из страны гражданства и/или постоянного проживания.</p>
                        </li>
                    </ul>
                </div>
            </section>
        </main>

        <footer class="text-center mt-8 py-4 border-t border-gray-200">
            <p class="text-xs md:text-sm text-gray-500">
                Информация является оценочной и основана на данных за 2025 год. Требования могут меняться.
            </p>
        </footer>
    </div>

    <script>
        let currentIndex = 0;
        const carouselTrack = document.getElementById('carousel-track');
        const countryFiltersContainer = document.getElementById('country-filters');
        const detailsContent = document.getElementById('details-content');

        const visaData = [
            {
                id: 'portugal',
                name: 'Португалия',
                flag: '🇵🇹',
                income: 3280,
                fee: 90,
                validity: '1 год, с продлением до 5 лет',
                details: 'Одна из самых популярных виз D7/D8. Предоставляет путь к долгосрочному резидентству и гражданству.',
                tax: 'Возможен льготный налоговый режим NHR, позволяющий платить 20% налога на доходы от работы в Португалии или не платить налог на доходы из-за рубежа.',
                insurance: 'Требуется полное частное страхование.',
                col1p: 1100,
                col2p: 1850,
                rent: 1400,
                food: 350,
                transport: 40,
                safety: 'Очень высокая. Страна занимает одно из первых мест в мире по уровню безопасности.',
                citizenship: '5 лет проживания с ВНЖ, затем подача на гражданство (требуется знание языка).',
                venue: 'Консульство Португалии в стране проживания.',
                processTime: '60-90 дней.',
                population: '10.3 млн',
                economy: '~€25k ВВП/чел',
                climate: 'Средиземноморский, мягкий',
                english: 'Выше среднего (65%)'
            },
            {
                id: 'spain',
                name: 'Испания',
                flag: '🇪🇸',
                income: 2600,
                fee: 80,
                validity: '1 год, продление до 5 лет',
                details: 'Недавно введенная виза, привлекательная своим налоговым режимом и возможностью быстрого получения ВНЖ.',
                tax: 'Специальный налоговый режим (Закон Бекхэма) с фиксированной ставкой 24% на доходы до €600,000 в течение первых 5 лет.',
                insurance: 'Требуется частная страховка без доплат.',
                col1p: 1050,
                col2p: 1750,
                rent: 1300,
                food: 380,
                transport: 55,
                safety: 'Высокая. Основные риски — мелкое воровство в туристических зонах.',
                citizenship: '5 лет проживания с ВНЖ, затем подача на ПМЖ. Для гражданства нужно 10 лет легального проживания.',
                venue: 'Консульство Испании в стране проживания.',
                processTime: '45-60 дней.',
                population: '47.5 млн',
                economy: '~€30k ВВП/чел',
                climate: 'Разнообразный, теплый',
                english: 'Средний (55%)'
            },
            {
                id: 'italy',
                name: 'Италия',
                flag: '🇮🇹',
                income: 2800,
                fee: 116,
                validity: '1 год, можно продлить',
                details: 'Новая, долгожданная виза (запущена в 2024 году). Привлекает историей и культурой, но процесс может быть сложным.',
                tax: 'Стандартное прогрессивное налогообложение, но возможны региональные налоговые льготы.',
                insurance: 'Требуется страхование на весь срок пребывания.',
                col1p: 1000,
                col2p: 1650,
                rent: 1100,
                food: 340,
                transport: 38,
                safety: 'Средняя, но очень безопасна в северных регионах. Низкий уровень насильственных преступлений.',
                citizenship: '5 лет ВНЖ, затем 10 лет легального проживания для подачи на гражданство (требуется знание языка).',
                venue: 'Консульство Италии или Посольство в стране проживания.',
                processTime: '60-120 дней (зависит от консульства).',
                population: '59 млн',
                economy: '~€35k ВВП/чел',
                climate: 'Средиземноморский, разнообразный',
                english: 'Низкий (48%)'
            },
            {
                id: 'croatia',
                name: 'Хорватия',
                flag: '🇭🇷',
                income: 2540,
                fee: 150,
                validity: '1 год, не продлевается (нужно выехать на 6 мес.)',
                details: 'Отличается полным освобождением от подоходного налога. Идеально для тех, кто ищет краткосрочную налоговую оптимизацию.',
                tax: 'Полное освобождение от уплаты подоходного налога в Хорватии на период действия визы.',
                insurance: 'Требуется страхование на территории Хорватии.',
                col1p: 950,
                col2p: 1500,
                rent: 800,
                food: 320,
                transport: 30,
                safety: 'Высокая. Хорватия считается одной из самых безопасных стран для проживания.',
                citizenship: 'Не ведет к ПМЖ и гражданству напрямую, так как не продлевается без перерыва.',
                venue: 'Онлайн-заявление или в Консульстве/Полицейском участке Хорватии (если уже в стране).',
                processTime: '30-45 дней.',
                population: '3.9 млн',
                economy: '~€20k ВВП/чел',
                climate: 'Средиземноморский/Континентальный',
                english: 'Высокий (70%)'
            },
            {
                id: 'hungary',
                name: 'Венгрия',
                flag: '🇭🇺',
                income: 3000,
                fee: 110,
                validity: '1 год, с продлением еще на 1 год',
                details: 'Известна как "White Card". Привлекательна низкой стоимостью жизни и простым процессом продления.',
                tax: 'Освобождение от уплаты налогов в Венгрии в первые 6 месяцев.',
                insurance: 'Требуется медицинская страховка на сумму не менее 30,000 евро.',
                col1p: 850,
                col2p: 1400,
                rent: 900,
                food: 280,
                transport: 35,
                safety: 'Хорошая. Будапешт безопасен, но нужно быть осторожным в туристических районах.',
                citizenship: '5 лет проживания с ВНЖ, затем 8 лет легального проживания для подачи на гражданство.',
                venue: 'Консульство Венгрии в стране проживания.',
                processTime: '45-60 дней.',
                population: '9.6 млн',
                economy: '~€18k ВВП/чел',
                climate: 'Континентальный, холодные зимы',
                english: 'Ниже среднего (45%)'
            },
            {
                id: 'greece',
                name: 'Греция',
                flag: '🇬🇷',
                income: 3500,
                fee: 75,
                validity: '2 года, можно продлить',
                details: 'Более высокий порог входа, но длительный срок действия визы и существенная налоговая льгота.',
                tax: 'Налоговая льгота: уплата налога только с 50% дохода в течение 7 лет (при условии переезда в страну).',
                insurance: 'Требуется полное частное страхование.',
                col1p: 900,
                col2p: 1550,
                rent: 1000,
                food: 330,
                transport: 30,
                safety: 'Средняя. В туристических местах нужно проявлять осторожность. Высокий уровень безопасности на островах.',
                citizenship: '5 лет проживания с ВНЖ, затем подача на гражданство (требуется знание языка и интеграция).',
                venue: 'Консульство Греции в стране проживания.',
                processTime: '60-90 дней.',
                population: '10.4 млн',
                economy: '~€21k ВВП/чел',
                climate: 'Средиземноморский, жаркое лето',
                english: 'Средний (58%)'
            },
            {
                id: 'malta',
                name: 'Мальта',
                flag: '🇲🇹',
                income: 2700,
                fee: 300,
                validity: '1 год, можно продлить',
                details: 'Nomad Residence Permit. Высокая стоимость сбора, но англоязычная среда и полностью онлайн-процесс.',
                tax: 'Освобождение от подоходного налога, но есть ежегодный сбор за продление статуса.',
                insurance: 'Требуется полное частное страхование.',
                col1p: 1200,
                col2p: 1950,
                rent: 1150,
                food: 400,
                transport: 26,
                safety: 'Высокая. Очень низкий уровень преступности, особенно в жилых районах.',
                citizenship: 'Не ведет к гражданству, но позволяет получить ВНЖ и оставаться в стране, пока сохраняется статус кочевника.',
                venue: 'Онлайн-заявление через программу "Nomad Residence Malta".',
                processTime: '15-30 дней (быстрый процесс).',
                population: '0.5 млн',
                economy: '~€30k ВВП/чел',
                climate: 'Субтропический, очень тепло',
                english: 'Очень высокий (80%)'
            },
            {
                id: 'germany',
                name: 'Германия',
                flag: '🇩🇪',
                income: 3000, 
                fee: 100,
                validity: 'До 3 лет',
                details: 'Виза для фрилансеров (Freiberufler). Нет четкого порога, но нужно доказать финансовую состоятельность и связь с немецкими клиентами.',
                tax: 'Полное налоговое резидентство с первого дня, прогрессивная шкала, высокие налоги, но отличная социальная система.',
                insurance: 'Требуется немецкая медицинская страховка (государственная или частная).',
                col1p: 1250,
                col2p: 2000,
                rent: 1500,
                food: 370,
                transport: 70,
                safety: 'Очень высокая. Одна из самых безопасных стран Западной Европы.',
                citizenship: '5 лет проживания с ВНЖ, затем подача на гражданство (требуется знание языка B1 и тест на интеграцию).',
                venue: 'Консульство Германии в стране проживания, затем Иммиграционный офис (Ausländerbehörde) в Германии.',
                processTime: '30 дней (для первичной визы D) + 4-6 месяцев (для ВНЖ на месте).',
                population: '84 млн',
                economy: '~€50k ВВП/чел',
                climate: 'Умеренно-морской, прохладный',
                english: 'Очень высокий (75%)'
            }
        ];

        function formatIncome(value) {
            if (value === null) return 'Гибкие требования';
            return `€${value.toLocaleString('ru-RU')}`;
        }

        function showSlide(index) {
            if (index >= visaData.length) {
                currentIndex = 0;
            } else if (index < 0) {
                currentIndex = visaData.length - 1;
            } else {
                currentIndex = index;
            }

            const offset = -currentIndex * 100;
            carouselTrack.style.transform = `translateX(${offset}%)`;

            updateDetails(visaData[currentIndex].id);
        }

        function nextSlide() {
            showSlide(currentIndex + 1);
        }

        function prevSlide() {
            showSlide(currentIndex - 1);
        }

        function createCarousel() {
            carouselTrack.innerHTML = '';
            visaData.forEach((country, index) => {
                const slide = document.createElement('div');
                slide.className = 'carousel-slide';
                slide.setAttribute('data-index', index);
                
                slide.innerHTML = `
                    <div class="slide-card">
                        <div>
                            <div class="flex items-center justify-between mb-4 border-b pb-3">
                                <h3 class="text-xl md:text-2xl font-bold text-teal-800">${country.flag} ${country.name}</h3>
                                <div class="text-base font-bold text-amber-700 bg-amber-100 px-2 py-1 rounded-full shadow-md">
                                    ${formatIncome(country.income)} <span class="text-xs font-normal text-amber-600"> / мес.</span>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-y-3 gap-x-2 text-xs md:text-sm">
                                <div class="flex items-center space-x-2">
                                    <span class="text-teal-600">👥</span>
                                    <div>
                                        <p class="font-semibold text-gray-700">Население:</p>
                                        <p class="text-gray-500">${country.population}</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-teal-600">💰</span>
                                    <div>
                                        <p class="font-semibold text-gray-700">Экономика (ВВП):</p>
                                        <p class="text-gray-500">${country.economy}</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-teal-600">☀️</span>
                                    <div>
                                        <p class="font-semibold text-gray-700">Климат:</p>
                                        <p class="text-gray-500">${country.climate}</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-teal-600">🗣️</span>
                                    <div>
                                        <p class="font-semibold text-gray-700">Англ. язык (EF):</p>
                                        <p class="text-gray-500">${country.english}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4 flex justify-center">
                            <button data-country="${country.id}" class="update-detail-btn px-5 py-2 text-sm bg-teal-600 text-white rounded-full font-semibold hover:bg-teal-700 transition-colors shadow-md">
                                Показать подробнее
                            </button>
                        </div>
                    </div>
                `;
                carouselTrack.appendChild(slide);
            });
        }

        function createFinanceTabContent(country) {
            return `
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                    <div class="bg-amber-50 p-4 rounded-lg border-l-4 border-amber-500">
                        <p class="text-xs md:text-sm text-amber-800 font-semibold mb-1">Мин. доход в месяц</p>
                        <p class="text-xl md:text-2xl font-bold text-amber-900">${formatIncome(country.income)}</p>
                        <p class="text-xs text-amber-700 mt-1">Визовое требование</p>
                    </div>
                    <div class="bg-teal-50 p-4 rounded-lg border-l-4 border-teal-500">
                        <p class="text-xs md:text-sm text-teal-800 font-semibold mb-1">Визовый сбор</p>
                        <p class="text-xl md:text-2xl font-bold text-teal-900">~ €${country.fee}</p>
                         <p class="text-xs text-teal-700 mt-1">Разовый платеж</p>
                    </div>
                    <div class="bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
                        <p class="text-xs md:text-sm text-indigo-800 font-semibold mb-1">Налог на доход</p>
                        <p class="text-sm md:text-base font-bold text-indigo-900">${country.tax.split(':')[0]}</p>
                        <p class="text-xs text-indigo-700 mt-1">${country.tax.split(':')[1] || country.tax}</p>
                    </div>
                </div>

                <h4 class="text-lg md:text-xl font-bold text-gray-700 mt-6 md:mt-8 mb-2 border-b pb-2">Оценочная стоимость жизни (мес.)</h4>
                <p class="text-xs md:text-sm text-gray-600 mb-4">
                    Расчет стоимости без учета аренды включает: <strong class="text-teal-700">продукты питания, коммунальные услуги, интернет, мобильную связь, базовые развлечения и транспорт.</strong>
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 text-sm md:text-base">
                    <div class="space-y-2 md:space-y-3">
                        <p class="text-base font-semibold text-gray-800">Без учета аренды</p>
                        <ul class="space-y-1 md:space-y-2 text-gray-700">
                            <li><strong class="font-bold text-teal-600">Один человек:</strong> €${country.col1p.toLocaleString('ru-RU')}</li>
                            <li><strong class="font-bold text-teal-600">Два человека:</strong> €${country.col2p.toLocaleString('ru-RU')}</li>
                        </ul>
                    </div>
                    <div class="space-y-2 md:space-y-3">
                        <p class="text-base font-semibold text-gray-800">Основные расходы</p>
                        <ul class="space-y-1 md:space-y-2 text-gray-700">
                            <li><strong class="font-bold text-amber-600">Аренда (1-bed центр):</strong> ~ €${country.rent.toLocaleString('ru-RU')}</li>
                            <li><strong class="font-bold text-amber-600">Еда (1 чел.):</strong> ~ €${country.food}</li>
                            <li><strong class="font-bold text-amber-600">Проезд:</strong> ~ €${country.transport} (проездной)</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function createLogisticsTabContent(country) {
            return `
                <h4 class="text-lg md:text-xl font-bold text-gray-700 mb-4 border-b pb-2">Процесс и сроки</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 text-sm">
                    <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-gray-400">
                        <p class="text-xs text-gray-600 font-semibold mb-1">Место подачи</p>
                        <p class="text-sm md:text-base font-bold text-gray-800">${country.venue}</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-gray-400">
                        <p class="text-xs text-gray-600 font-semibold mb-1">Срок оформления</p>
                        <p class="text-sm md:text-base font-bold text-gray-800">${country.processTime}</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-gray-400">
                        <p class="text-xs text-gray-600 font-semibold mb-1">Первичный срок</p>
                        <p class="text-sm md:text-base font-bold text-gray-800">${country.validity}</p>
                    </div>
                </div>
                
                <h4 class="text-lg md:text-xl font-bold text-teal-700 mt-6 md:mt-8 mb-4 border-b pb-2">Перспективы гражданства</h4>
                <div class="bg-teal-50 p-4 rounded-lg text-sm md:text-base">
                    <p class="text-sm md:text-base font-bold text-teal-800 mb-2">Путь:</p>
                    <p class="text-gray-700">${country.citizenship}</p>
                    <p class="text-xs md:text-sm text-teal-700 mt-2">Важно: ВНЖ через визу кочевника обычно засчитывается в срок для получения ПМЖ/гражданства, но есть исключения (например, Хорватия).</p>
                </div>
            `;
        }

        function createLifestyleTabContent(country) {
            return `
                <h4 class="text-lg md:text-xl font-bold text-gray-700 mb-4 border-b pb-2">Безопасность и среда</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 text-sm">
                    <div class="bg-teal-50 p-4 rounded-lg border-l-4 border-teal-500">
                        <p class="text-xs md:text-sm text-teal-800 font-semibold mb-1">Уровень безопасности</p>
                        <p class="text-sm md:text-base font-bold text-teal-900">${country.safety}</p>
                    </div>
                    <div class="bg-amber-50 p-4 rounded-lg border-l-4 border-amber-500">
                        <p class="text-xs md:text-sm text-amber-800 font-semibold mb-1">Медицинское страхование</p>
                        <p class="text-sm md:text-base font-bold text-amber-900">${country.insurance}</p>
                    </div>
                </div>

                <h4 class="text-lg md:text-xl font-bold text-gray-700 mt-6 md:mt-8 mb-4 border-b pb-2">Дополнительные сведения</h4>
                <div class="bg-white p-4 rounded-lg border border-gray-200 text-sm md:text-base">
                    <p class="text-gray-700">${country.details}</p>
                </div>
            `;
        }

        function updateDetails(countryId) {
            const country = visaData.find(c => c.id === countryId);
            if (!country) return;

            detailsContent.parentElement.style.opacity = 0;

            setTimeout(() => {
                detailsContent.innerHTML = `
                    <div class="flex flex-col md:flex-row items-start md:items-center mb-4 md:mb-6">
                        <h2 class="text-2xl md:text-4xl font-bold text-teal-700 mr-4">${country.flag} ${country.name}</h2>
                    </div>
                    <p class="text-sm md:text-base text-gray-600 mb-6 md:mb-8 max-w-3xl">${country.details}</p>

                    <div id="tabs-container" class="flex border-b border-gray-200 mb-4 md:mb-6 overflow-x-auto whitespace-nowrap">
                        <button data-tab="finances" class="tab-button py-2 px-3 md:px-4 text-sm md:text-base text-gray-500 hover:text-teal-600 transition-colors duration-200">Финансы</button>
                        <button data-tab="logistics" class="tab-button py-2 px-3 md:px-4 text-sm md:text-base text-gray-500 hover:text-teal-600 transition-colors duration-200">Логистика</button>
                        <button data-tab="lifestyle" class="tab-button py-2 px-3 md:px-4 text-sm md:text-base text-gray-500 hover:text-teal-600 transition-colors duration-200">Образ жизни</button>
                    </div>

                    <div id="tab-content" class="min-h-[300px]">
                    </div>
                `;

                const tabContent = document.getElementById('tab-content');
                const tabButtons = document.querySelectorAll('.tab-button');
                
                function switchTab(tabName) {
                    tabButtons.forEach(btn => btn.classList.remove('tab-active'));
                    const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
                    if (activeBtn) activeBtn.classList.add('tab-active');

                    switch (tabName) {
                        case 'finances':
                            tabContent.innerHTML = createFinanceTabContent(country);
                            break;
                        case 'logistics':
                            tabContent.innerHTML = createLogisticsTabContent(country);
                            break;
                        case 'lifestyle':
                            tabContent.innerHTML = createLifestyleTabContent(country);
                            break;
                    }
                }

                tabButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        switchTab(e.target.dataset.tab);
                    });
                });

                switchTab('finances');
                
                detailsContent.parentElement.style.opacity = 1;
            }, 300);

            document.querySelectorAll('#country-filters button').forEach(btn => {
                btn.classList.remove('active-button');
                if (btn.dataset.country === countryId) {
                    btn.classList.add('active-button');
                }
            });

            const newIndex = visaData.findIndex(c => c.id === countryId);
            if (newIndex !== -1 && newIndex !== currentIndex) {
                currentIndex = newIndex;
                showSlide(currentIndex);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');

            createCarousel();
            showSlide(0);

            prevButton.addEventListener('click', prevSlide);
            nextButton.addEventListener('click', nextSlide);

            visaData.forEach(country => {
                const button = document.createElement('button');
                // Уменьшаем размер кнопок на мобильных
                button.className = 'px-3 py-1.5 text-xs md:text-sm font-medium text-teal-700 bg-white border border-teal-200 rounded-full hover:bg-teal-50 transition-colors duration-200';
                button.textContent = `${country.flag} ${country.name}`;
                button.dataset.country = country.id;
                button.addEventListener('click', () => {
                    updateDetails(country.id);
                });
                countryFiltersContainer.appendChild(button);
            });
            
            document.querySelectorAll('.update-detail-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const countryId = e.target.dataset.country;
                    updateDetails(countryId);
                    document.getElementById('details-view').scrollIntoView({ behavior: 'smooth' });
                });
            });
        });
    </script>
</body>
</html>
