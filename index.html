<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–∏–¥ –ø–æ –≤–∏–∑–∞–º –¥–ª—è —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –∫–æ—á–µ–≤–Ω–∏–∫–æ–≤ –≤ –ï–≤—Ä–æ–ø–µ (2025)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Warm neutrals like bg-amber-50, with amber-500 and teal-600 as accents) -->
    <!-- Application Structure Plan: A single-page dashboard. The core remains the interactive bar chart comparing minimum income, serving as the main entry point. The country selection buttons provide an alternative navigation path. The critical update is the "Detailed Information" panel, which now uses a three-tabbed structure (–§–∏–Ω–∞–Ω—Å—ã, –õ–æ–≥–∏—Å—Ç–∏–∫–∞, –û–±—Ä–∞–∑ –∂–∏–∑–Ω–∏) to organize the massive influx of new structured data (CoL, Rent, Safety, Citizenship, Application Process) clearly. This tabbed approach maintains the single-page flow while allowing deep, structured exploration of specific topics for a selected country. -->
    <!-- Visualization & Content Choices: 1. Minimum Income Data -> Goal: Compare -> Viz: Horizontal Bar Chart (Chart.js) -> Interaction: Click on bar updates detail view -> Justification: Best for comparing the most critical quantitative factor. 2. All Country-Specific Data (fees, taxes, CoL, etc.) -> Goal: Inform/Organize -> Presentation: Dynamic HTML card with Tabs -> Interaction: Tabs switch structured content via JS -> Justification: The most effective method to present a large, structured dataset (logistics, finances, lifestyle) in a limited screen area without clutter. 3. Country List -> Goal: Organize/Navigate -> Presentation: Styled HTML Buttons -> Interaction: Click updates details and highlights button -> Justification: Clear, secondary navigation. All choices confirmed to use Canvas/HTML/CSS, with NO SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFFAF0; 
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 500px;
            }
        }
        .active-button {
            background-color: #14B8A6 !important;
            color: white !important;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .tab-active {
            border-bottom: 3px solid #0D9488;
            color: #0D9488;
            font-weight: 600;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <header class="text-center mb-10 md:mb-16">
            <h1 class="text-3xl md:text-5xl font-bold text-teal-800 mb-2">–ì–∏–¥ –ø–æ –≤–∏–∑–∞–º –¥–ª—è —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –∫–æ—á–µ–≤–Ω–∏–∫–æ–≤ –≤ –ï–≤—Ä–æ–ø–µ</h1>
            <p class="text-lg md:text-xl text-gray-600 mt-2">–ü–æ–ª–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π, —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∂–∏–∑–Ω–∏ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∏ –≤ 2025 –≥–æ–¥—É</p>
        </header>

        <main>
            <section id="comparison-tool" class="bg-white rounded-2xl shadow-lg p-6 md:p-8 mb-10 md:mb-16">
                <div class="text-center mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-teal-700 mb-2">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞</h2>
                    <p class="text-gray-600 max-w-3xl mx-auto">
                        –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–∏–∞–≥—Ä–∞–º–º—É –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∫–ª—é—á–µ–≤–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç–æ–ª–±–µ—Ü —Å—Ç—Ä–∞–Ω—ã –∏–ª–∏ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∏–∑–µ, —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∂–∏–∑–Ω–∏ –∏ –ø—É—Ç–∏ –∫ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤—É.
                    </p>
                </div>
                
                <div class="chart-container mb-8">
                    <canvas id="incomeChart"></canvas>
                </div>

                <div id="country-filters" class="flex flex-wrap justify-center gap-2 md:gap-3 mb-8">
                </div>
            </section>

            <section id="details-view" class="min-h-[600px] transition-opacity duration-500">
                <div id="details-content" class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
                </div>
            </section>
            
            <section id="general-info" class="mt-10 md:mt-16">
                <div class="bg-teal-50 border-l-4 border-teal-500 rounded-r-lg p-6 md:p-8">
                     <h2 class="text-2xl md:text-3xl font-bold text-teal-700 mb-4">–û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è</h2>
                    <p class="text-gray-700 mb-6">
                       –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–π –º–∏–Ω–∏–º—É–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–∞–º –¥–ª—è –ª—é–±–æ–π –≤–∏–∑—ã —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –∫–æ—á–µ–≤–Ω–∏–∫–∞ –≤ –ï–≤—Ä–æ–ø–µ.
                    </p>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="text-teal-600 font-bold mr-3">‚úì</span>
                            <p><strong class="font-semibold">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:</strong> –î–µ–π—Å—Ç–≤—É—é—â–∏–π —Ç—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä —Å –∫–æ–º–ø–∞–Ω–∏–µ–π –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —Å—Ç—Ä–∞–Ω—ã –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞.</p>
                        </li>
                        <li class="flex items-start">
                            <span class="text-teal-600 font-bold mr-3">‚úì</span>
                             <p><strong class="font-semibold">–ú–µ–¥. —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞:</strong> –ü–æ–ª–∏—Å, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π –Ω–∞ –≤–µ—Å—å —Å—Ä–æ–∫ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è –∏ –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–π –≤—Å–µ —Ä–∏—Å–∫–∏.</p>
                        </li>
                        <li class="flex items-start">
                            <span class="text-teal-600 font-bold mr-3">‚úì</span>
                            <p><strong class="font-semibold">–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:</strong> –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞ (–±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –≤—ã–ø–∏—Å–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3-6 –º–µ—Å—è—Ü–µ–≤), –ø—Ä–µ–≤—ã—à–∞—é—â–µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∏–Ω–∏–º—É–º.</p>
                        </li>
                        <li class="flex items-start">
                           <span class="text-teal-600 font-bold mr-3">‚úì</span>
                            <p><strong class="font-semibold">–°–ø—Ä–∞–≤–∫–∞ –æ –Ω–µ—Å—É–¥–∏–º–æ—Å—Ç–∏:</strong> –ò–∑ —Å—Ç—Ä–∞–Ω—ã –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞ –∏/–∏–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.</p>
                        </li>
                    </ul>
                </div>
            </section>
        </main>

        <footer class="text-center mt-12 py-6 border-t border-gray-200">
            <p class="text-sm text-gray-500">
                –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –æ—Ü–µ–Ω–æ—á–Ω–æ–π –∏ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ 2025 –≥–æ–¥. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å—Å—è.
            </p>
        </footer>
    </div>

    <script>
        const visaData = [
            {
                id: 'portugal',
                name: '–ü–æ—Ä—Ç—É–≥–∞–ª–∏—è',
                flag: 'üáµüáπ',
                income: 3280,
                fee: 90,
                validity: '1 –≥–æ–¥, —Å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ–º –¥–æ 5 –ª–µ—Ç',
                details: '–û–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≤–∏–∑ D7/D8. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É—Ç—å –∫ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–º—É —Ä–µ–∑–∏–¥–µ–Ω—Ç—Å—Ç–≤—É –∏ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤—É.',
                tax: '–í–æ–∑–º–æ–∂–µ–Ω –ª—å–≥–æ—Ç–Ω—ã–π –Ω–∞–ª–æ–≥–æ–≤—ã–π —Ä–µ–∂–∏–º NHR, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø–ª–∞—Ç–∏—Ç—å 20% –Ω–∞–ª–æ–≥–∞ –Ω–∞ –¥–æ—Ö–æ–¥—ã –æ—Ç —Ä–∞–±–æ—Ç—ã –≤ –ü–æ—Ä—Ç—É–≥–∞–ª–∏–∏ –∏–ª–∏ –Ω–µ –ø–ª–∞—Ç–∏—Ç—å –Ω–∞–ª–æ–≥ –Ω–∞ –¥–æ—Ö–æ–¥—ã –∏–∑-–∑–∞ —Ä—É–±–µ–∂–∞.',
                insurance: '–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ–µ —á–∞—Å—Ç–Ω–æ–µ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ.',
                col1p: 1100,
                col2p: 1850,
                rent: 1400,
                food: 350,
                transport: 40,
                safety: '–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è. –°—Ç—Ä–∞–Ω–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –æ–¥–Ω–æ –∏–∑ –ø–µ—Ä–≤—ã—Ö –º–µ—Å—Ç –≤ –º–∏—Ä–µ –ø–æ —É—Ä–æ–≤–Ω—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.',
                citizenship: '5 –ª–µ—Ç –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è —Å –í–ù–ñ, –∑–∞—Ç–µ–º –ø–æ–¥–∞—á–∞ –Ω–∞ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–Ω–∞–Ω–∏–µ —è–∑—ã–∫–∞).',
                venue: '–ö–æ–Ω—Å—É–ª—å—Å—Ç–≤–æ –ü–æ—Ä—Ç—É–≥–∞–ª–∏–∏ –≤ —Å—Ç—Ä–∞–Ω–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.',
                processTime: '60-90 –¥–Ω–µ–π.'
            },
            {
                id: 'spain',
                name: '–ò—Å–ø–∞–Ω–∏—è',
                flag: 'üá™üá∏',
                income: 2600,
                fee: 80,
                validity: '1 –≥–æ–¥, –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –¥–æ 5 –ª–µ—Ç',
                details: '–ù–µ–¥–∞–≤–Ω–æ –≤–≤–µ–¥–µ–Ω–Ω–∞—è –≤–∏–∑–∞, –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è —Å–≤–æ–∏–º –Ω–∞–ª–æ–≥–æ–≤—ã–º —Ä–µ–∂–∏–º–æ–º –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –í–ù–ñ.',
                tax: '–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –Ω–∞–ª–æ–≥–æ–≤—ã–π —Ä–µ–∂–∏–º (–ó–∞–∫–æ–Ω –ë–µ–∫—Ö—ç–º–∞) —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞–≤–∫–æ–π 24% –Ω–∞ –¥–æ—Ö–æ–¥—ã –¥–æ ‚Ç¨600,000 –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö 5 –ª–µ—Ç.',
                insurance: '–¢—Ä–µ–±—É–µ—Ç—Å—è —á–∞—Å—Ç–Ω–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –±–µ–∑ –¥–æ–ø–ª–∞—Ç.',
                col1p: 1050,
                col2p: 1750,
                rent: 1300,
                food: 380,
                transport: 55,
                safety: '–í—ã—Å–æ–∫–∞—è. –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏ ‚Äî –º–µ–ª–∫–æ–µ –≤–æ—Ä–æ–≤—Å—Ç–≤–æ –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –∑–æ–Ω–∞—Ö.',
                citizenship: '5 –ª–µ—Ç –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è —Å –í–ù–ñ, –∑–∞—Ç–µ–º –ø–æ–¥–∞—á–∞ –Ω–∞ –ü–ú–ñ. –î–ª—è –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞ –Ω—É–∂–Ω–æ 10 –ª–µ—Ç –ª–µ–≥–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.',
                venue: '–ö–æ–Ω—Å—É–ª—å—Å—Ç–≤–æ –ò—Å–ø–∞–Ω–∏–∏ –≤ —Å—Ç—Ä–∞–Ω–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.',
                processTime: '45-60 –¥–Ω–µ–π.'
            },
            {
                id: 'italy',
                name: '–ò—Ç–∞–ª–∏—è',
                flag: 'üáÆüáπ',
                income: 2800,
                fee: 116,
                validity: '1 –≥–æ–¥, –º–æ–∂–Ω–æ –ø—Ä–æ–¥–ª–∏—Ç—å',
                details: '–ù–æ–≤–∞—è, –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω–∞—è –≤–∏–∑–∞ (–∑–∞–ø—É—â–µ–Ω–∞ –≤ 2024 –≥–æ–¥—É). –ü—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏–µ–π –∏ –∫—É–ª—å—Ç—É—Ä–æ–π, –Ω–æ –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º.',
                tax: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏–µ, –Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–ª–æ–≥–æ–≤—ã–µ –ª—å–≥–æ—Ç—ã.',
                insurance: '–¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —Å—Ä–æ–∫ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è.',
                col1p: 1000,
                col2p: 1650,
                rent: 1100,
                food: 340,
                transport: 38,
                safety: '–°—Ä–µ–¥–Ω—è—è, –Ω–æ –æ—á–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–∞ –≤ —Å–µ–≤–µ—Ä–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö. –ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–π.',
                citizenship: '5 –ª–µ—Ç –í–ù–ñ, –∑–∞—Ç–µ–º 10 –ª–µ—Ç –ª–µ–≥–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è –¥–ª—è –ø–æ–¥–∞—á–∏ –Ω–∞ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–Ω–∞–Ω–∏–µ —è–∑—ã–∫–∞).',
                venue: '–ö–æ–Ω—Å—É–ª—å—Å—Ç–≤–æ –ò—Ç–∞–ª–∏–∏ –∏–ª–∏ –ü–æ—Å–æ–ª—å—Å—Ç–≤–æ –≤ —Å—Ç—Ä–∞–Ω–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.',
                processTime: '60-120 –¥–Ω–µ–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Å—É–ª—å—Å—Ç–≤–∞).'
            },
            {
                id: 'croatia',
                name: '–•–æ—Ä–≤–∞—Ç–∏—è',
                flag: 'üá≠üá∑',
                income: 2540,
                fee: 150,
                validity: '1 –≥–æ–¥, –Ω–µ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è (–Ω—É–∂–Ω–æ –≤—ã–µ—Ö–∞—Ç—å –Ω–∞ 6 –º–µ—Å.)',
                details: '–û—Ç–ª–∏—á–∞–µ—Ç—Å—è –ø–æ–ª–Ω—ã–º –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ–º –æ—Ç –ø–æ–¥–æ—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ª–æ–≥–∞. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –∏—â–µ—Ç –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—É—é –Ω–∞–ª–æ–≥–æ–≤—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é.',
                tax: '–ü–æ–ª–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –æ—Ç —É–ø–ª–∞—Ç—ã –ø–æ–¥–æ—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ª–æ–≥–∞ –≤ –•–æ—Ä–≤–∞—Ç–∏–∏ –Ω–∞ –ø–µ—Ä–∏–æ–¥ –¥–µ–π—Å—Ç–≤–∏—è –≤–∏–∑—ã.',
                insurance: '–¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –•–æ—Ä–≤–∞—Ç–∏–∏.',
                col1p: 950,
                col2p: 1500,
                rent: 800,
                food: 320,
                transport: 30,
                safety: '–í—ã—Å–æ–∫–∞—è. –•–æ—Ä–≤–∞—Ç–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∏–∑ —Å–∞–º—ã—Ö –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω –¥–ª—è –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.',
                citizenship: '–ù–µ –≤–µ–¥–µ—Ç –∫ –ü–ú–ñ –∏ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤—É –Ω–∞–ø—Ä—è–º—É—é, —Ç–∞–∫ –∫–∞–∫ –Ω–µ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ—Ä—ã–≤–∞.',
                venue: '–û–Ω–ª–∞–π–Ω-–∑–∞—è–≤–ª–µ–Ω–∏–µ –∏–ª–∏ –≤ –ö–æ–Ω—Å—É–ª—å—Å—Ç–≤–µ/–ü–æ–ª–∏—Ü–µ–π—Å–∫–æ–º —É—á–∞—Å—Ç–∫–µ –•–æ—Ä–≤–∞—Ç–∏–∏ (–µ—Å–ª–∏ —É–∂–µ –≤ —Å—Ç—Ä–∞–Ω–µ).',
                processTime: '30-45 –¥–Ω–µ–π.'
            },
            {
                id: 'hungary',
                name: '–í–µ–Ω–≥—Ä–∏—è',
                flag: 'üá≠üá∫',
                income: 3000,
                fee: 110,
                validity: '1 –≥–æ–¥, —Å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ–º –µ—â–µ –Ω–∞ 1 –≥–æ–¥',
                details: '–ò–∑–≤–µ—Å—Ç–Ω–∞ –∫–∞–∫ "White Card". –ü—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞ –Ω–∏–∑–∫–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –∂–∏–∑–Ω–∏ –∏ –ø—Ä–æ—Å—Ç—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –ø—Ä–æ–¥–ª–µ–Ω–∏—è.',
                tax: '–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –æ—Ç —É–ø–ª–∞—Ç—ã –Ω–∞–ª–æ–≥–æ–≤ –≤ –í–µ–Ω–≥—Ä–∏–∏ –≤ –ø–µ—Ä–≤—ã–µ 6 –º–µ—Å—è—Ü–µ–≤.',
                insurance: '–¢—Ä–µ–±—É–µ—Ç—Å—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –Ω–∞ —Å—É–º–º—É –Ω–µ –º–µ–Ω–µ–µ 30,000 –µ–≤—Ä–æ.',
                col1p: 850,
                col2p: 1400,
                rent: 900,
                food: 280,
                transport: 35,
                safety: '–•–æ—Ä–æ—à–∞—è. –ë—É–¥–∞–ø–µ—à—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω, –Ω–æ –Ω—É–∂–Ω–æ –±—ã—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–º –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞–π–æ–Ω–∞—Ö.',
                citizenship: '5 –ª–µ—Ç –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è —Å –í–ù–ñ, –∑–∞—Ç–µ–º 8 –ª–µ—Ç –ª–µ–≥–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è –¥–ª—è –ø–æ–¥–∞—á–∏ –Ω–∞ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ.',
                venue: '–ö–æ–Ω—Å—É–ª—å—Å—Ç–≤–æ –í–µ–Ω–≥—Ä–∏–∏ –≤ —Å—Ç—Ä–∞–Ω–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.',
                processTime: '45-60 –¥–Ω–µ–π.'
            },
            {
                id: 'greece',
                name: '–ì—Ä–µ—Ü–∏—è',
                flag: 'üá¨üá∑',
                income: 3500,
                fee: 75,
                validity: '2 –≥–æ–¥–∞, –º–æ–∂–Ω–æ –ø—Ä–æ–¥–ª–∏—Ç—å',
                details: '–ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞, –Ω–æ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –≤–∏–∑—ã –∏ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–∞–ª–æ–≥–æ–≤–∞—è –ª—å–≥–æ—Ç–∞.',
                tax: '–ù–∞–ª–æ–≥–æ–≤–∞—è –ª—å–≥–æ—Ç–∞: —É–ø–ª–∞—Ç–∞ –Ω–∞–ª–æ–≥–∞ —Ç–æ–ª—å–∫–æ —Å 50% –¥–æ—Ö–æ–¥–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 7 –ª–µ—Ç (–ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ –ø–µ—Ä–µ–µ–∑–¥–∞ –≤ —Å—Ç—Ä–∞–Ω—É).',
                insurance: '–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ–µ —á–∞—Å—Ç–Ω–æ–µ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ.',
                col1p: 900,
                col2p: 1550,
                rent: 1000,
                food: 330,
                transport: 30,
                safety: '–°—Ä–µ–¥–Ω—è—è. –í —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö –Ω—É–∂–Ω–æ –ø—Ä–æ—è–≤–ª—è—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å. –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–∞ –æ—Å—Ç—Ä–æ–≤–∞—Ö.',
                citizenship: '5 –ª–µ—Ç –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è —Å –í–ù–ñ, –∑–∞—Ç–µ–º –ø–æ–¥–∞—á–∞ –Ω–∞ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–Ω–∞–Ω–∏–µ —è–∑—ã–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è).',
                venue: '–ö–æ–Ω—Å—É–ª—å—Å—Ç–≤–æ –ì—Ä–µ—Ü–∏–∏ –≤ —Å—Ç—Ä–∞–Ω–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.',
                processTime: '60-90 –¥–Ω–µ–π.'
            },
            {
                id: 'malta',
                name: '–ú–∞–ª—å—Ç–∞',
                flag: 'üá≤üáπ',
                income: 2700,
                fee: 300,
                validity: '1 –≥–æ–¥, –º–æ–∂–Ω–æ –ø—Ä–æ–¥–ª–∏—Ç—å',
                details: 'Nomad Residence Permit. –í—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–±–æ—Ä–∞, –Ω–æ –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω–∞—è —Å—Ä–µ–¥–∞ –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ—Ü–µ—Å—Å.',
                tax: '–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –æ—Ç –ø–æ–¥–æ—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ª–æ–≥–∞, –Ω–æ –µ—Å—Ç—å –µ–∂–µ–≥–æ–¥–Ω—ã–π —Å–±–æ—Ä –∑–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞.',
                insurance: '–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ–µ —á–∞—Å—Ç–Ω–æ–µ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ.',
                col1p: 1200,
                col2p: 1950,
                rent: 1150,
                food: 400,
                transport: 26,
                safety: '–í—ã—Å–æ–∫–∞—è. –û—á–µ–Ω—å –Ω–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–µ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –∂–∏–ª—ã—Ö —Ä–∞–π–æ–Ω–∞—Ö.',
                citizenship: '–ù–µ –≤–µ–¥–µ—Ç –∫ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤—É, –Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –í–ù–ñ –∏ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ —Å—Ç—Ä–∞–Ω–µ, –ø–æ–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –∫–æ—á–µ–≤–Ω–∏–∫–∞.',
                venue: '–û–Ω–ª–∞–π–Ω-–∑–∞—è–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º—É "Nomad Residence Malta".',
                processTime: '15-30 –¥–Ω–µ–π (–±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å).'
            },
            {
                id: 'germany',
                name: '–ì–µ—Ä–º–∞–Ω–∏—è',
                flag: 'üá©üá™',
                income: 3000, 
                fee: 100,
                validity: '–î–æ 3 –ª–µ—Ç',
                details: '–í–∏–∑–∞ –¥–ª—è —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–æ–≤ (Freiberufler). –ù–µ—Ç —á–µ—Ç–∫–æ–≥–æ –ø–æ—Ä–æ–≥–∞, –Ω–æ –Ω—É–∂–Ω–æ –¥–æ–∫–∞–∑–∞—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é —Å–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å–≤—è–∑—å —Å –Ω–µ–º–µ—Ü–∫–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏.',
                tax: '–ü–æ–ª–Ω–æ–µ –Ω–∞–ª–æ–≥–æ–≤–æ–µ —Ä–µ–∑–∏–¥–µ–Ω—Ç—Å—Ç–≤–æ —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è, –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —à–∫–∞–ª–∞, –≤—ã—Å–æ–∫–∏–µ –Ω–∞–ª–æ–≥–∏, –Ω–æ –æ—Ç–ª–∏—á–Ω–∞—è —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞.',
                insurance: '–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–º–µ—Ü–∫–∞—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ (–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–ª–∏ —á–∞—Å—Ç–Ω–∞—è).',
                col1p: 1250,
                col2p: 2000,
                rent: 1500,
                food: 370,
                transport: 70,
                safety: '–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è. –û–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω –ó–∞–ø–∞–¥–Ω–æ–π –ï–≤—Ä–æ–ø—ã.',
                citizenship: '5 –ª–µ—Ç –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è —Å –í–ù–ñ, –∑–∞—Ç–µ–º –ø–æ–¥–∞—á–∞ –Ω–∞ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–Ω–∞–Ω–∏–µ —è–∑—ã–∫–∞ B1 –∏ —Ç–µ—Å—Ç –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é).',
                venue: '–ö–æ–Ω—Å—É–ª—å—Å—Ç–≤–æ –ì–µ—Ä–º–∞–Ω–∏–∏ –≤ —Å—Ç—Ä–∞–Ω–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è, –∑–∞—Ç–µ–º –ò–º–º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –æ—Ñ–∏—Å (Ausl√§nderbeh√∂rde) –≤ –ì–µ—Ä–º–∞–Ω–∏–∏.',
                processTime: '30 –¥–Ω–µ–π (–¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –≤–∏–∑—ã D) + 4-6 –º–µ—Å—è—Ü–µ–≤ (–¥–ª—è –í–ù–ñ –Ω–∞ –º–µ—Å—Ç–µ).'
            }
        ];

        const countryFiltersContainer = document.getElementById('country-filters');
        const detailsContent = document.getElementById('details-content');
        const ctx = document.getElementById('incomeChart').getContext('2d');
        let incomeChart;

        function formatIncome(value) {
            if (value === null) return '–ì–∏–±–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è';
            return `‚Ç¨${value.toLocaleString('ru-RU')}`;
        }

        function createFinanceTabContent(country) {
            return `
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-amber-50 p-5 rounded-lg border-l-4 border-amber-500">
                        <p class="text-sm text-amber-800 font-semibold mb-1">–ú–∏–Ω. –¥–æ—Ö–æ–¥ –≤ –º–µ—Å—è—Ü</p>
                        <p class="text-2xl font-bold text-amber-900">${formatIncome(country.income)}</p>
                        <p class="text-xs text-amber-700 mt-1">–í–∏–∑–æ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ</p>
                    </div>
                    <div class="bg-teal-50 p-5 rounded-lg border-l-4 border-teal-500">
                        <p class="text-sm text-teal-800 font-semibold mb-1">–í–∏–∑–æ–≤—ã–π —Å–±–æ—Ä</p>
                        <p class="text-2xl font-bold text-teal-900">~ ‚Ç¨${country.fee}</p>
                         <p class="text-xs text-teal-700 mt-1">–†–∞–∑–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂</p>
                    </div>
                    <div class="bg-indigo-50 p-5 rounded-lg border-l-4 border-indigo-500">
                        <p class="text-sm text-indigo-800 font-semibold mb-1">–ù–∞–ª–æ–≥ –Ω–∞ –¥–æ—Ö–æ–¥</p>
                        <p class="text-base font-bold text-indigo-900">${country.tax.split(':')[0]}</p>
                        <p class="text-xs text-indigo-700 mt-1">${country.tax.split(':')[1] || country.tax}</p>
                    </div>
                </div>

                <h4 class="text-xl font-bold text-gray-700 mt-8 mb-4 border-b pb-2">–û—Ü–µ–Ω–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∂–∏–∑–Ω–∏ (–º–µ—Å.)</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-3">
                        <p class="text-lg font-semibold text-gray-800">–ë–µ–∑ —É—á–µ—Ç–∞ –∞—Ä–µ–Ω–¥—ã</p>
                        <ul class="space-y-2 text-gray-700">
                            <li><strong class="font-bold text-teal-600">–û–¥–∏–Ω —á–µ–ª–æ–≤–µ–∫:</strong> ‚Ç¨${country.col1p.toLocaleString('ru-RU')}</li>
                            <li><strong class="font-bold text-teal-600">–î–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞:</strong> ‚Ç¨${country.col2p.toLocaleString('ru-RU')}</li>
                        </ul>
                    </div>
                    <div class="space-y-3">
                        <p class="text-lg font-semibold text-gray-800">–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</p>
                        <ul class="space-y-2 text-gray-700">
                            <li><strong class="font-bold text-amber-600">–ê—Ä–µ–Ω–¥–∞ (1-bed —Ü–µ–Ω—Ç—Ä):</strong> ~ ‚Ç¨${country.rent.toLocaleString('ru-RU')}</li>
                            <li><strong class="font-bold text-amber-600">–ï–¥–∞ (1 —á–µ–ª.):</strong> ~ ‚Ç¨${country.food}</li>
                            <li><strong class="font-bold text-amber-600">–ü—Ä–æ–µ–∑–¥:</strong> ~ ‚Ç¨${country.transport} (–ø—Ä–æ–µ–∑–¥–Ω–æ–π)</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function createLogisticsTabContent(country) {
            return `
                <h4 class="text-xl font-bold text-gray-700 mb-4 border-b pb-2">–ü—Ä–æ—Ü–µ—Å—Å –∏ —Å—Ä–æ–∫–∏</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-gray-50 p-5 rounded-lg border-l-4 border-gray-400">
                        <p class="text-sm text-gray-600 font-semibold mb-1">–ú–µ—Å—Ç–æ –ø–æ–¥–∞—á–∏</p>
                        <p class="text-base font-bold text-gray-800">${country.venue}</p>
                    </div>
                    <div class="bg-gray-50 p-5 rounded-lg border-l-4 border-gray-400">
                        <p class="text-sm text-gray-600 font-semibold mb-1">–°—Ä–æ–∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</p>
                        <p class="text-base font-bold text-gray-800">${country.processTime}</p>
                    </div>
                    <div class="bg-gray-50 p-5 rounded-lg border-l-4 border-gray-400">
                        <p class="text-sm text-gray-600 font-semibold mb-1">–ü–µ—Ä–≤–∏—á–Ω—ã–π —Å—Ä–æ–∫</p>
                        <p class="text-base font-bold text-gray-800">${country.validity}</p>
                    </div>
                </div>
                
                <h4 class="text-xl font-bold text-teal-700 mt-8 mb-4 border-b pb-2">–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞</h4>
                <div class="bg-teal-50 p-5 rounded-lg">
                    <p class="text-base font-bold text-teal-800 mb-2">–ü—É—Ç—å:</p>
                    <p class="text-gray-700">${country.citizenship}</p>
                    <p class="text-sm text-teal-700 mt-2">–í–∞–∂–Ω–æ: –í–ù–ñ —á–µ—Ä–µ–∑ –≤–∏–∑—É –∫–æ—á–µ–≤–Ω–∏–∫–∞ –æ–±—ã—á–Ω–æ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ —Å—Ä–æ–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ü–ú–ñ/–≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞, –Ω–æ –µ—Å—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –•–æ—Ä–≤–∞—Ç–∏—è).</p>
                </div>
            `;
        }

        function createLifestyleTabContent(country) {
            return `
                <h4 class="text-xl font-bold text-gray-700 mb-4 border-b pb-2">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å—Ä–µ–¥–∞</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-teal-50 p-5 rounded-lg border-l-4 border-teal-500">
                        <p class="text-sm text-teal-800 font-semibold mb-1">–£—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</p>
                        <p class="text-base font-bold text-teal-900">${country.safety}</p>
                    </div>
                    <div class="bg-amber-50 p-5 rounded-lg border-l-4 border-amber-500">
                        <p class="text-sm text-amber-800 font-semibold mb-1">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ</p>
                        <p class="text-base font-bold text-amber-900">${country.insurance}</p>
                    </div>
                </div>

                <h4 class="text-xl font-bold text-gray-700 mt-8 mb-4 border-b pb-2">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è</h4>
                <div class="bg-white p-5 rounded-lg border border-gray-200">
                    <p class="text-gray-700">${country.details}</p>
                </div>
            `;
        }

        function updateDetails(countryId) {
            const country = visaData.find(c => c.id === countryId);
            if (!country) return;

            detailsContent.parentElement.style.opacity = 0;

            setTimeout(() => {
                detailsContent.innerHTML = `
                    <div class="flex flex-col md:flex-row items-start md:items-center mb-6">
                        <h2 class="text-3xl md:text-4xl font-bold text-teal-700 mr-4">${country.flag} ${country.name}</h2>
                    </div>
                    <p class="text-gray-600 mb-8 max-w-3xl">${country.details}</p>

                    <div id="tabs-container" class="flex border-b border-gray-200 mb-6">
                        <button data-tab="finances" class="tab-button py-2 px-4 text-gray-500 hover:text-teal-600 transition-colors duration-200">–§–∏–Ω–∞–Ω—Å—ã</button>
                        <button data-tab="logistics" class="tab-button py-2 px-4 text-gray-500 hover:text-teal-600 transition-colors duration-200">–õ–æ–≥–∏—Å—Ç–∏–∫–∞</button>
                        <button data-tab="lifestyle" class="tab-button py-2 px-4 text-gray-500 hover:text-teal-600 transition-colors duration-200">–û–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</button>
                    </div>

                    <div id="tab-content" class="min-h-[300px]">
                    </div>
                `;

                const tabContent = document.getElementById('tab-content');
                const tabButtons = document.querySelectorAll('.tab-button');
                
                function switchTab(tabName) {
                    tabButtons.forEach(btn => btn.classList.remove('tab-active'));
                    const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
                    if (activeBtn) activeBtn.classList.add('tab-active');

                    switch (tabName) {
                        case 'finances':
                            tabContent.innerHTML = createFinanceTabContent(country);
                            break;
                        case 'logistics':
                            tabContent.innerHTML = createLogisticsTabContent(country);
                            break;
                        case 'lifestyle':
                            tabContent.innerHTML = createLifestyleTabContent(country);
                            break;
                    }
                }

                tabButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        switchTab(e.target.dataset.tab);
                    });
                });

                // Activate default tab
                switchTab('finances');
                
                detailsContent.parentElement.style.opacity = 1;
            }, 300);

            document.querySelectorAll('#country-filters button').forEach(btn => {
                btn.classList.remove('active-button');
                if (btn.dataset.country === countryId) {
                    btn.classList.add('active-button');
                }
            });
        }

        function createChart() {
            const chartData = visaData.filter(c => c.income !== null);
            
            incomeChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: chartData.map(c => c.name),
                    datasets: [{
                        label: '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥ (‚Ç¨)',
                        data: chartData.map(c => c.income),
                        backgroundColor: 'rgba(20, 184, 166, 0.7)',
                        borderColor: 'rgba(15, 118, 110, 1)',
                        borderWidth: 1,
                        borderRadius: 4,
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.dataset.label}: ${formatIncome(context.raw)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '–°—É–º–º–∞ –≤ –µ–≤—Ä–æ (‚Ç¨)'
                            }
                        }
                    },
                    onClick: (event) => {
                       const points = incomeChart.getElementsAtEventForMode(event, 'nearest', { intersect: true }, true);
                        if (points.length) {
                            const firstPoint = points[0];
                            const label = incomeChart.data.labels[firstPoint.index];
                            const country = visaData.find(c => c.name === label);
                            if (country) {
                                updateDetails(country.id);
                                 document.getElementById('details-view').scrollIntoView({ behavior: 'smooth' });
                            }
                        }
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            visaData.forEach(country => {
                const button = document.createElement('button');
                button.className = 'px-4 py-2 text-sm md:text-base font-medium text-teal-700 bg-white border border-teal-200 rounded-full hover:bg-teal-50 transition-colors duration-200';
                button.textContent = `${country.flag} ${country.name}`;
                button.dataset.country = country.id;
                button.addEventListener('click', () => {
                    updateDetails(country.id);
                });
                countryFiltersContainer.appendChild(button);
            });

            createChart();
            updateDetails(visaData[0].id);
        });
    </script>
</body>
</html>
